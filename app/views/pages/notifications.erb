<div class="container-index borders">
  <% if current_user.notifications.unread.length == 0 %>
    <h3>You have no notifications</h3>
  <% end %>

  <% current_user.notifications.unread.newest_first.each do |notification| %>
    <div class="notification-card">
      <div class="notification-left">
        <% if User.find(notification.params[:answer].user_id).photo.attached? %>
          <%= cl_image_tag User.find(notification.params[:answer].user_id).photo.key, class:"avatar-large" %>
        <% else %>
          <%= image_tag('anonymous.webp', class: "avatar-large") %>
        <% end %>
      </div>
      <div class="notification-right">
        <div>
          <h5><%= User.find(notification.params[:answer].user_id).first_name %> answered your <%= link_to Question.find(notification.params[:answer].question_id).title, question_path(Question.find(notification.params[:answer].question_id)) %></h5>
          <% if notification.unread? %>
            <%= link_to notification_path(notification), method: :patch do %>
              <i class="fa-solid fa-envelope-circle-check"></i>
            <% end %>
          <% end %>
        </div>
        <p><%= notification.params[:answer].content %></p>
        <div>
          <%= time_ago_in_words(notification.created_at)%> ago
        </div>
      </div>
    </div>
  <% end %>
</div>
